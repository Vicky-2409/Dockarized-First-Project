<main class="main">
    <div class="page-header breadcrumb-wrap">
        <div class="container">
            <div class="breadcrumb">
                <a href="index.html" rel="nofollow">Home</a>
                <span></span> Shop
            </div>
        </div>
    </div>
    <section class="mt-50 mb-50">
        <div class="container">
            <div class="row flex-row-reverse">
                <div class="col-lg-9">

                    <div class="row product-grid-3" id="productList">
                        {{#if productData.length}}

                        
                        {{#each productData}}
                        <div class="col-lg-4 col-md-4 col-12 col-sm-6">
                            <div class="product-cart-wrap mb-30">
                                <div class="product-img-action-wrap">
                                    <div class="product-img product-img-zoom">
                                        <a href="/productview?id={{this._id}}">
                                            <img class="default-img" src="/images/products/{{this.imageUrl.[0]}}" alt="">
                                            <img class="hover-img" src="/images/products/{{this.imageUrl.[1]}}" alt="">
                                        </a>
                                    </div>
                                    <div class="product-action-1">
                                        <a aria-label="Quick view" class="action-btn hover-up" href="/productview?id={{this._id}}">
                                            <i class="fi-rs-search"></i></a>
                                    </div>
                                    <div class="product-badges product-badges-position product-badges-mrg">
                                       
                                    </div>
                                </div>
                                <div class="product-content-wrap">
                                    <div class="product-category">
                                        <a href="#">{{this.category.category}}</a>
                                    </div>
                                    <h2><a href="/productview?id={{this._id}}">{{this.name}}</a>
									<input type="hidden" id="name{{this._id}}" value="{{this.name}}">
									<input type="hidden" id="id" value="{{this._id}}">
									</h2>

                                    <div class="product-price">
                                        <span>₹{{this.price}}</span>
                                      
                                    </div>

                                    <div class="product-action-1 show">
										{{#if this.isWishlisted}}
										<span id="click{{this._id}}">
                                        <a onclick="removeFromWishlist('{{this._id}}')" id="icon-1" aria-label="Add To Wishlist"
                                            class="wish action-btn hover-up" href="#"><i class="fa-solid fa-heart"></i></a>
										</span>
										{{else}}
										<span id="click{{this._id}}">
                                        <a onclick="addToWishlist('{{this._id}}')" id="icon-2" aria-label="Add To Wishlist"
                                            class="wish action-btn hover-up" href="#"><i class="fi-rs-heart"></i></a>
										</span>
										{{/if}}
									</div>

                                </div>
                                {{!-- <span class="material-symbols-outlined">
                                    heart_plus
                                </span> --}}
                            </div>
                        </div>
                        {{/each}}
                        {{else}}
    <h2 class="m-5">No product available</h2>
                        {{/if}}



                    </div>
                    <!--pagination-->
                    {{!-- <div class="pagination-area mt-15 mb-sm-5 mb-lg-0">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination justify-content-start">
                                <li class="page-item active"><a class="page-link" href="#">01</a></li>
                                <li class="page-item"><a class="page-link" href="#">02</a></li>
                                <li class="page-item"><a class="page-link" href="#">03</a></li>
                                <li class="page-item"><a class="page-link dot" href="#">...</a></li>
                                <li class="page-item"><a class="page-link" href="#">16</a></li>
                                <li class="page-item"><a class="page-link" href="#"><i
                                            class="fi-rs-angle-double-small-right"></i></a></li>
                            </ul>
                        </nav>
                    </div> --}}
                </div>
                <div class="col-lg-3 primary-sidebar sticky-sidebar">
                    <div class="widget-category mb-30">
                        <h5 class="section-title style-1 mb-30 wow fadeIn animated">Category</h5>
                        <ul class="categories">
                            {{#each catData}}
                            <li>
								<a href="/category?id={{this._id}}">{{this.category}}</a></li>
                            {{/each}}
                            {{!-- <li><a href="shop-grid-right.html">Blouses & Shirts</a></li>
                            <li><a href="shop-grid-right.html">Dresses</a></li>
                            <li><a href="shop-grid-right.html">Swimwear</a></li>
                            <li><a href="shop-grid-right.html">Beauty</a></li>
                            <li><a href="shop-grid-right.html">Jewelry & Watch</a></li>
                            <li><a href="shop-grid-right.html">Accessories</a></li> --}}
                        </ul>
                    </div>
                    <!-- Fillter By Price -->
                    <div class="widget-category mb-30">
                        <h5 class="section-title style-1 mb-30 wow fadeIn animated">Sort</h5>
                        <ul>
                            {{!-- <li><a class="active" href="#">Featured</a></li> --}}
                            <li><a href="#">Price: Low to High</a></li>
                            <li><a href="#">Price: High to Low</a></li>
                            <li><a href="#">A - Z</a></li>
                            <li><a href="#">Z - A</a></li>
                        </ul>
                    </div>

                    <!-- Product sidebar Widget -->
                    <div class="sidebar-widget product-sidebar  mb-30 p-30 bg-grey border-radius-10">
                        <div class="widget-header position-relative mb-20 pb-10">
                            <h5 class="widget-title mb-10">New products</h5>
                            <div class="bt-1 border-color-1"></div>
                        </div>
                        {{#each newProduct}}
                        <div class="single-post clearfix">
                             <a href="/productview?id={{this._id}}">
                            <div class="image" >
                                <img src="/images/products/{{this.imageUrl.[0]}}" alt="#">
                            </div>
                            <div class="content pt-10">
                                <h5><a href="/productview?id={{this._id}}">{{this.name}}</a></h5>
                                <p class="price mb-0 mt-5">₹{{this.price}}</p>

                            </div>
                            </a>
                        </div>
                        {{/each}}
                    </div>

                </div>
            </div>
        </div>
    </section>
</main>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/javascripts/products.js"></script>
{{!--
<script src="sweetalert2.all.min.js"></script> --}}
{{!--
<script src="/assets/js/vendor/sweetalert.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://common.olemiss.edu/_js/sweet-alert/sweet-alert.css"> --}}
<script>


   	const addToWishlist = async (id) => {


		document.getElementById('click'+id).innerHTML= `<a aria-label="Add To Wishlist"
                                            class="wish action-btn hover-up" href="#"><i class="fi fi-ss-heart"></i></a>`
		
		let response = await fetch(`/add_to_wishlist?id=${id}`,{
				headers : {
					"Content-Type":"application/json"
				},
			})

			let data = await response.json()

			if(data){
			}

		
	} 





</script>